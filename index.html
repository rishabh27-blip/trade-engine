<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0f172a">

    <title>Trade Decision Engine</title>

    <!-- âœ… IMPORTANT: NO BASE TAG -->

    <link rel="manifest" href="./manifest.json">
    <link rel="icon" href="./icon-192.png">
    <link rel="apple-touch-icon" href="./icon-192.png">

    <link rel="stylesheet" href="styles.css">
</head>

<body>

<div class="container">
    <h1>ðŸ“Š Trade Engine</h1>

    <!-- INSTALL BUTTON -->
    <div id="installPrompt" style="display:none;">
        <button id="installBtn">ðŸ“± Install App</button>
    </div>

    <div class="box">
        <input id="buy" placeholder="Buy Price">
        <input id="sell" placeholder="Sell Price">
        <input id="qty" placeholder="Qty">
        <input id="transport" placeholder="Transport">
        <input id="broker" placeholder="Broker">
        <input id="days" placeholder="Holding Days">
        <input id="vol" placeholder="Volatility">
        <input id="rel" placeholder="Reliability">

        <button onclick="evaluateTrade()">Evaluate</button>
        <div id="output"></div>
    </div>
</div>

<script src="app.js"></script>

<script>
let deferredPrompt;

// âœ… Install trigger
window.addEventListener('beforeinstallprompt', (e) => {
    console.log("Install available");
    e.preventDefault();
    deferredPrompt = e;
    document.getElementById('installPrompt').style.display = 'block';
});

document.getElementById('installBtn').addEventListener('click', async () => {
    if (deferredPrompt) {
        deferredPrompt.prompt();
        await deferredPrompt.userChoice;
        deferredPrompt = null;
    }
});

// âœ… Service Worker
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./service-worker.js')
        .then(() => console.log("SW registered"))
        .catch(err => console.log(err));
}
</script>

</body>
</html>
